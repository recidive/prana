<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Prana by recidive</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Prana</h1>
        <img src="images/logo.png" alt="Prana">
        <!--<p>Prana Framework</p>-->

        <p class="view"><a href="https://github.com/recidive/prana">View the Project on GitHub <small>recidive/prana</small></a></p>


        <ul>
          <li><a href="https://github.com/recidive/prana/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/recidive/prana/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/recidive/prana">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
<h1>
<a name="prana" class="anchor" href="#prana"><span class="octicon octicon-link"></span></a>Prana</h1>

<p>Prana is a microframework for building modular and extensible <a href="http://nodejs.org">node.js</a> applications.</p>

<p>It provides an extensions system that helps bringing organization, code reusability and extensibility to your project.</p>

<p>Extensions can implement hooks for adding their bits of functionality. Hooks can also be used for adding and modifying all kind of application metadata, such as settings, database schema and other application related metadata that can be extended.</p>

<p>Prana also collects metadata from JSON files, so you can easily distribute your extensions with the metadata they need to run.</p>

<h2>
<a name="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<pre><code>$ npm install prana
</code></pre>

<h2>
<a name="user-content-getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getting started</h2>

<p>A very simple Prana application will look something like this:</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">Prana</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'prana'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Prana</span><span class="p">();</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">extensions</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Do some application specific stuff.</span>
<span class="p">});</span>
</pre></div>

<p>For complete examples check the <a href="https://github.com/recidive/prana/tree/master/examples">examples folder</a>.</p>

<h2>
<a name="user-content-extensions" class="anchor" href="#extensions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Extensions</h2>

<p>Extensions allow you to build reusable components that can be easily shared through applications or application instances.</p>

<p>You can add extensions programmatically like this:</p>

<div class="highlight highlight-js"><pre><span class="c1">// The prototype of our programmatically created extension.</span>
<span class="kd">var</span> <span class="nx">myExtensionPrototype</span> <span class="o">=</span> <span class="p">{</span>

  <span class="c1">// The collect hook allow you to alter items of all types when they get</span>
  <span class="c1">// collected.</span>
  <span class="nx">collect</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">items</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Add a property to all types. You can use type to act only on items of a</span>
    <span class="c1">// specific type.</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">itemKey</span> <span class="k">in</span> <span class="nx">items</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">items</span><span class="p">[</span><span class="nx">itemKey</span><span class="p">].</span><span class="nx">property</span> <span class="o">=</span> <span class="s1">'value'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">callback</span><span class="p">();</span>
  <span class="p">}</span>

<span class="p">};</span>

<span class="c1">// Add an extension programmatically.</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">extension</span><span class="p">(</span><span class="s1">'my-extension'</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">title</span><span class="o">:</span> <span class="s1">'My Extension'</span><span class="p">,</span>
  <span class="nx">description</span><span class="o">:</span> <span class="s1">'This is just an example extension.'</span><span class="p">,</span>
  <span class="nx">prototype</span><span class="o">:</span> <span class="nx">myExtensionPrototype</span>
<span class="p">});</span>
</pre></div>

<p>But it's usually more useful having Prana scan a folder for extensions:</p>

<div class="highlight highlight-js"><pre><span class="c1">// Scan 'extensions' folder for extensions and add them.</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">loadExtensions</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">'/extensions'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">extensions</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Do something with the just loaded extensions.</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Loaded %d extensions.'</span><span class="p">,</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">extensions</span><span class="p">).</span><span class="nx">length</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<p>This will recursively scans a folder named 'extensions' looking for two kind of files: one named <code>{extension-name}.extension.json</code> that contains extension information. And <code>{extension-name}.js</code> that contains the extension prototype.</p>

<p>For example, you can have a folder called <code>example</code> inside the <code>extensions</code> folder of your application with <code>example.extension.json</code> and <code>example.js</code> files in it with the following content:</p>

<h3>
<a name="user-content-exampleextensionjson" class="anchor" href="#exampleextensionjson" aria-hidden="true"><span class="octicon octicon-link"></span></a>example.extension.json</h3>

<div class="highlight highlight-json"><pre><span class="p">{</span>
  <span class="nt">"title"</span><span class="p">:</span> <span class="s2">"Example Extension"</span><span class="p">,</span>
  <span class="nt">"description"</span><span class="p">:</span> <span class="s2">"This is just an example extension."</span>
<span class="p">}</span>
</pre></div>

<h3>
<a name="user-content-examplejs" class="anchor" href="#examplejs" aria-hidden="true"><span class="octicon octicon-link"></span></a>example.js</h3>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">example</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>

  <span class="nx">collect</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">items</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Add a property to all types. You can use type to act only on items of a</span>
    <span class="c1">// specific type.</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">itemKey</span> <span class="k">in</span> <span class="nx">items</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">items</span><span class="p">[</span><span class="nx">itemKey</span><span class="p">].</span><span class="nx">property</span> <span class="o">=</span> <span class="s1">'value'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">callback</span><span class="p">();</span>
  <span class="p">}</span>

<span class="p">};</span>
</pre></div>

<h2>
<a name="user-content-adding-you-own-hooks" class="anchor" href="#adding-you-own-hooks" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding you own hooks</h2>

<p>To add your hooks you can just use the <code>invoke()</code> method and your hook will be called on all extensions:</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">example</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>

  <span class="nx">collect</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">items</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Invoke itemsDecoratorHook() on all extensions.</span>
    <span class="c1">// This is where we "create" our hook.</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="s1">'itemsDecoratorHook'</span><span class="p">,</span> <span class="nx">items</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">itemsDecoratorHook</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">items</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Add a property to all types. You can use type to act only on items of a</span>
    <span class="c1">// specific type.</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">itemKey</span> <span class="k">in</span> <span class="nx">items</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">items</span><span class="p">[</span><span class="nx">itemKey</span><span class="p">].</span><span class="nx">property</span> <span class="o">=</span> <span class="s1">'value'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">callback</span><span class="p">();</span>
  <span class="p">}</span>

<span class="p">};</span>
</pre></div>

<h2>
<a name="user-content-collector-hooks" class="anchor" href="#collector-hooks" aria-hidden="true"><span class="octicon octicon-link"></span></a>Collector hooks</h2>

<p>Collector hooks provides a clever way for collecting metadata from hooks and JSON files for using in your application. You can implement collector hooks by using the <code>collect()</code> and <code>pick()</code> methods:</p>

<div class="highlight highlight-js"><pre><span class="c1">// Collect all items of type 'my-type'.</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">collect</span><span class="p">(</span><span class="s1">'my-type'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">items</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">items</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// Pick a single item of type 'my-type' with key 'my-item-key'.</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">pick</span><span class="p">(</span><span class="s1">'my-type'</span><span class="p">,</span> <span class="s1">'my-item-key'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<h2>
<a name="user-content-coding-style" class="anchor" href="#coding-style" aria-hidden="true"><span class="octicon octicon-link"></span></a>Coding style</h2>

<p>We try to conform to <a href="https://github.com/felixge/node-style-guide">Felix's Node.js Style Guide</a>
for all of our JavaScript code. For coding documentation we use <a href="http://usejsdoc.org/">JSDoc</a>
style.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/recidive">recidive</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-43023631-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
